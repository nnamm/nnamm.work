<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>nnamm.work - macOS</title><link href="/" rel="alternate"/><link href="/feeds/macos.rss.xml" rel="self"/><id>/</id><updated>2021-05-30T00:00:00+09:00</updated><subtitle>portfolio note</subtitle><entry><title>iCloud Driveは何でもかんでも同期されるわけじゃないのね</title><link href="/posts/009-be-careful-files-sync-by-icloud" rel="alternate"/><published>2021-05-30T00:00:00+09:00</published><updated>2021-05-30T00:00:00+09:00</updated><author><name>花村貴史 / Takashi Hanamura</name></author><id>tag:None,2021-05-30:/posts/009-be-careful-files-sync-by-icloud</id><summary type="html">&lt;p&gt;今回はデータ管理についての備忘録です。最終的に記事タイトルのことに行き着いた、失敗から得た学びです。&lt;/p&gt;
&lt;p&gt;僕は開 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;今回はデータ管理についての備忘録です。最終的に記事タイトルのことに行き着いた、失敗から得た学びです。&lt;/p&gt;
&lt;p&gt;僕は開発系のデータを含めて、ざっくりした作業ディレクトリを作っています。Coding とか Photo とか。それらを定期的に外部ストレージにバックアップ。プロジェクトによっては GitHub でも管理します。&lt;/p&gt;
&lt;p&gt;ある日、データ管理について考えることがありました。&lt;/p&gt;
&lt;h2 id="_1"&gt;我、名案、閃キ&lt;/h2&gt;
&lt;p&gt;ふと思ったのです。&lt;/p&gt;
&lt;p&gt;開発系データを iCloud Drive （正確には macOS の Documents ディレクトリ）に移動したら 2 重で保存されていいじゃーん！&lt;/p&gt;
&lt;p&gt;そんなわけで嬉々としてフォルダを移動しました。ただ、完全同期されるまで 1 日じゃ終わりませんでした。&lt;/p&gt;
&lt;p&gt;どうやら 1 万や 10 万といった大量ファイルの同期リクエストがなされると、ファイルサイズに関わらず、とてつもなく時間がかかるようです。調べてみると、これは Dropbox でも同様でした。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;venv 環境や node_modules 群といったものまであったので、そりゃもう大量のファイルがありました・・・&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_2"&gt;「.」で始まるファイルがなくなってる&lt;/h2&gt;
&lt;p&gt;さて、同期もおわり Terminal でのぞいてみると「.git」や「.gitignore」、「.eslintrc.js」などがことごとくない！！&lt;/p&gt;
&lt;p&gt;どうも iCloud Drive の仕様で、何でもかんでも同期されるわけじゃないようですね。Stack Overflow や Apple のサイトをみるに、そのことが書かれていました。&lt;/p&gt;
&lt;h2 id="_3"&gt;情報源&lt;/h2&gt;
&lt;h3 id="icloud-drive-faq-apple-support"&gt;&lt;a href="https://support.apple.com/en-us/HT201104" target="_blank"&gt;iCloud Drive FAQ - Apple Support&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;「What types of files can I store in iCloud Drive?」の項には、こう書かれしいます。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You shouldn't store app folders, libraries, or .tmp files in iCloud Drive.&lt;br/&gt;&lt;br/&gt;
アプリフォルダー、ライブラリ、または.tmp ファイルを iCloud ドライブに保存しないでください。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="github-can-git-and-icloud-drive-be-effectively-used-together-stack-overflow"&gt;&lt;a href="https://stackoverflow.com/questions/35853139/can-git-and-icloud-drive-be-effectively-used-together/51253959#51253959" target="_blank"&gt;github - Can Git and iCloud Drive be effectively used together? - Stack Overflow&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;「.git」はアプリフォルダー扱いとのこと。&lt;/p&gt;
&lt;h3 id="how-to-exclude-a-sub-folder-from-icloud-drive-in-macos-sierra-ask-different"&gt;&lt;a href="https://apple.stackexchange.com/questions/254313/how-to-exclude-a-sub-folder-from-icloud-drive-in-macos-sierra/295929#295929" target="_blank"&gt;How to exclude a sub folder from iCloud drive in macOS Sierra? - Ask Different&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;こちらには具体的にどんなファイルが同期されないかがリストアップされてました。以下、Stack Overflow から拝借。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Filename:&lt;/strong&gt;&lt;br/&gt;
    is .DS_Store&lt;br/&gt;
    begins with (A Document Being Saved&lt;br/&gt;
    contains .nosync (in any case)&lt;br/&gt;
    is .ubd&lt;br/&gt;
    contains .weakpkg&lt;br/&gt;
    is tmp (in any case)&lt;br/&gt;
    is .tmp (in any case)&lt;br/&gt;
    is desktop.ini (in any case)&lt;br/&gt;
    begins with ~$&lt;br/&gt;
    is Microsoft User Data (in any case)&lt;br/&gt;
    is $RECYCLE.BIN (in any case)&lt;br/&gt;
    is iPhoto Library (in any case)&lt;br/&gt;
    is Dropbox (in any case)&lt;br/&gt;
    is OneDrive (in any case)&lt;br/&gt;
    is IDrive-Sync (in any case)&lt;br/&gt;
    is .dropbox (in any case)&lt;br/&gt;
    is .dropbox.attr (in any case)&lt;br/&gt;
    is icon\r (in any case)&lt;br/&gt;
&lt;br/&gt;
&lt;strong&gt;Extension is (in any case):&lt;/strong&gt;&lt;br/&gt;
    tmp&lt;br/&gt;
    photoslibrary&lt;br/&gt;
    photolibrary&lt;br/&gt;
    aplibrary&lt;br/&gt;
    migratedaplibrary&lt;br/&gt;
    migratedphotolibrary&lt;br/&gt;
    migratedaperturelibrary&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_4"&gt;おわりに&lt;/h2&gt;
&lt;p&gt;iCloud Drive はたいていの場合は普通のストレージとして使えますが、物理ストレージと同じではないってことですね。認識を新たにしないと。&lt;/p&gt;
&lt;p&gt;現在、クラウドが広がり、あたりまえになっています。使いようによっては手間のかからないバックアップ手段ともなりますが、物理ストレージではありません。&lt;/p&gt;
&lt;p&gt;僕の用途としては写真ファイルもありますから、物理的なバックアップはまだまだ必要だと思うのでした。&lt;/p&gt;</content><category term="macOS"/><category term="macOS"/><category term="iCloud"/><category term="Apple"/></entry></feed>